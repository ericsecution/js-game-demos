{"version":3,"sources":["game_map.json","main.js"],"names":["module","exports","kaboom","global","scale","clearColor","canvas","document","getElementById","width","height","loadSprite","window","onload","gameData","require","scene","rooms","JSON","parse","stringify","roomDetails","roomConfig","layout","length","pos","vec2","sprite","solid","i","addLevel","player","get","directions","direction","keyDown","move","overlaps","destroy","go","action","resolve","add","text","origin","keyPress","start"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"..","sourcesContent":["module.exports = [\n    {\n      \"layout\": [\n        \"=====1======\",\n        \"=          =\",\n        \"=  @       =\",\n        \"=          =\",\n        \"=          =\",\n        \"=          =\",\n        \"=          =\",\n        \"=          =\",\n        \"=       i  =\",\n        \"=          =\",\n        \"============\"\n      ],\n      \"doors\": {\n        \"1\": {\n          \"isEnd\": true\n        }\n      }\n    }\n  ];","kaboom({\n    global: true,\n    scale: 3,\n    clearColor: [0,0,0,1],\n    canvas: document.getElementById('game'),\n    width: 180,\n    height: 180\n});\n\nloadSprite('player', 'hero.png');\nloadSprite('wall', 'wall2.png');\nloadSprite('door', 'opendoor.png');\nloadSprite('item', 'item.png');\n\nwindow.onload = function() {\n\n    const gameData = require('./game_map.json');\n\n    scene('game', () => {\n        const rooms = JSON.parse(JSON.stringify(gameData));\n\n        const roomDetails = rooms[0];\n\n        // Map characters of the room layout into the sprites\n        const roomConfig = {\n            width: roomDetails.layout[0].length,\n            height: roomDetails.layout.length,\n            pos: vec2(20,20),\n            '=': [\n                sprite('wall'),\n                solid(),\n                'wall'\n            ],\n            '@': [\n                sprite('player'),\n                'player'\n            ],\n           i: [\n            sprite('item'),\n            solid(),\n            'item'\n           ],\n           '1': [\n            sprite('door'),\n            solid(),\n            'door'\n           ]\n        }\n\n        addLevel(roomDetails.layout, roomConfig);\n        \n        const player = get('player')[0];\n\n        const directions = {\n            'left': vec2(-1, 0),\n            'right': vec2(1, 0),\n            'up': vec2(0, -1),\n            'down': vec2(0, 1)\n        }; \n\n        // Map key keypress to character movement\n        for(const direction in directions) {\n            keyDown(direction, () => {\n                player.move(directions[direction].scale(60));\n            })\n        }\n\n        player.overlaps('item', (i) => {\n            destroy(i);\n        })\n\n\n        player.overlaps('door', () => {\n            go('end');\n        })\n\n        player.action(() => {\n            player.resolve();\n        });\n    })\n    \n    scene('end', () => {\n        add([\n            text('You have finished this Scene!', 6), \n            pos(width()/2, height()/2),\n            origin('center')\n        ]);\n    })\n\n    scene('main', () => {\n        // display text\n        add([\n            text('Press the Spacebar to Begin!', 6),\n            pos(width()/2, height()/2),\n            origin('center')\n        ]);\n\n        keyPress('space', () => {\n            go('game');\n        });\n\n        add([\n            sprite(\"player\"), // renders as a sprite\n            pos(90, 65)\n        ]);\n    })\n\n\n\n    start('main');\n}"]}