{"version":3,"sources":["game_map.json","main.js"],"names":["module","exports","layout","doors","isEnd","kaboom","global","scale","clearColor","canvas","document","getElementById","width","height","loadSprite","window","onload","gameData","require","scene","roomDetails","JSON","parse","stringify","roomConfig","length","pos","vec2","sprite","solid","i","addLevel","player","get","directions","direction","keyDown","move","overlaps","destroy","go","action","resolve","add","text","origin","keyPress","start"],"mappings":";AAAAA,OAAOC,QAAQ,CAAC,CAACC,OAAO,CAAC,eAAe,eAAe,eAAe,eAAe,eAAe,eAAe,eAAe,eAAe,eAAe,eAAe,gBAAgBC,MAAM,CAAC,EAAE,CAACC,OAAM;;ACA/MC,OAAO,CACHC,QAAQ,EACRC,MAAO,EACPC,WAAY,CAAC,EAAE,EAAE,EAAE,GACnBC,OAAQC,SAASC,eAAe,QAChCC,MAAO,IACPC,OAAQ,MAGZC,WAAW,SAAU,YACrBA,WAAW,OAAQ,aACnBA,WAAW,OAAQ,gBACnBA,WAAW,OAAQ,YAEnBC,OAAOC,OAAS,WAEZ,IAAMC,EAAWC,QAAQ,mBAEzBC,MAAM,OAAQ,WACV,IAEMC,EAFQC,KAAKC,MAAMD,KAAKE,UAAUN,IAEd,GAGpBO,EAAa,CACfZ,MAAOQ,EAAYlB,OAAO,GAAGuB,OAC7BZ,OAAQO,EAAYlB,OAAOuB,OAC3BC,IAAKC,KAAK,GAAG,IACb,IAAK,CACDC,OAAO,QACPC,QACA,QAEJ,IAAK,CACDD,OAAO,UACP,UAELE,EAAG,CACFF,OAAO,QACPC,QACA,QAED,EAAK,CACJD,OAAO,QACPC,QACA,SAIJE,SAASX,EAAYlB,OAAQsB,GAE7B,IAAMQ,EAASC,IAAI,UAAU,GAEvBC,EAAa,CACf,KAAQP,MAAM,EAAG,GACjB,MAASA,KAAK,EAAG,GACjB,GAAMA,KAAK,GAAI,GACf,KAAQA,KAAK,EAAG,IAIVQ,EAAAA,SAAAA,GACNC,QAAQD,EAAW,WACfH,EAAOK,KAAKH,EAAWC,GAAW5B,MAAM,QAFhD,IAAI,IAAM4B,KAAaD,EAAY,EAAzBC,GAMVH,EAAOM,SAAS,OAAQ,SAACR,GACrBS,QAAQT,KAIZE,EAAOM,SAAS,OAAQ,WACpBE,GAAG,SAGPR,EAAOS,OAAO,WACVT,EAAOU,cAIfvB,MAAM,MAAO,WACTwB,IAAI,CACAC,KAAK,gCAAiC,GACtClB,IAAId,QAAQ,EAAGC,SAAS,GACxBgC,OAAO,cAIf1B,MAAM,OAAQ,WAEVwB,IAAI,CACAC,KAAK,+BAAgC,GACrClB,IAAId,QAAQ,EAAGC,SAAS,GACxBgC,OAAO,YAGXC,SAAS,QAAS,WACdN,GAAG,UAGPG,IAAI,CACAf,OAAO,UACPF,IAAI,GAAI,QAMhBqB,MAAM","file":"main.b8225f39.js","sourceRoot":"..","sourcesContent":["module.exports=[{layout:[\"=====1======\",\"=          =\",\"=  @       =\",\"=          =\",\"=          =\",\"=          =\",\"=          =\",\"=          =\",\"=       i  =\",\"=          =\",\"============\"],doors:{1:{isEnd:!0}}}];","kaboom({\n    global: true,\n    scale: 3,\n    clearColor: [0,0,0,1],\n    canvas: document.getElementById('game'),\n    width: 180,\n    height: 180\n});\n\nloadSprite('player', 'hero.png');\nloadSprite('wall', 'wall2.png');\nloadSprite('door', 'opendoor.png');\nloadSprite('item', 'item.png');\n\nwindow.onload = function() {\n\n    const gameData = require('./game_map.json');\n\n    scene('game', () => {\n        const rooms = JSON.parse(JSON.stringify(gameData));\n\n        const roomDetails = rooms[0];\n\n        // Map characters of the room layout into the sprites\n        const roomConfig = {\n            width: roomDetails.layout[0].length,\n            height: roomDetails.layout.length,\n            pos: vec2(20,20),\n            '=': [\n                sprite('wall'),\n                solid(),\n                'wall'\n            ],\n            '@': [\n                sprite('player'),\n                'player'\n            ],\n           i: [\n            sprite('item'),\n            solid(),\n            'item'\n           ],\n           '1': [\n            sprite('door'),\n            solid(),\n            'door'\n           ]\n        }\n\n        addLevel(roomDetails.layout, roomConfig);\n        \n        const player = get('player')[0];\n\n        const directions = {\n            'left': vec2(-1, 0),\n            'right': vec2(1, 0),\n            'up': vec2(0, -1),\n            'down': vec2(0, 1)\n        }; \n\n        // Map key keypress to character movement\n        for(const direction in directions) {\n            keyDown(direction, () => {\n                player.move(directions[direction].scale(60));\n            })\n        }\n\n        player.overlaps('item', (i) => {\n            destroy(i);\n        })\n\n\n        player.overlaps('door', () => {\n            go('end');\n        })\n\n        player.action(() => {\n            player.resolve();\n        });\n    })\n    \n    scene('end', () => {\n        add([\n            text('You have finished this Scene!', 6), \n            pos(width()/2, height()/2),\n            origin('center')\n        ]);\n    })\n\n    scene('main', () => {\n        // display text\n        add([\n            text('Press the Spacebar to Begin!', 6),\n            pos(width()/2, height()/2),\n            origin('center')\n        ]);\n\n        keyPress('space', () => {\n            go('game');\n        });\n\n        add([\n            sprite(\"player\"), // renders as a sprite\n            pos(90, 65)\n        ]);\n    })\n\n\n\n    start('main');\n}"]}